(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{3114:(e,t,l)=>{Promise.resolve().then(l.bind(l,7867))},7867:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var s=l(5155),n=l(2115);let i=function(e){return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-screen h-screen bg-black absolute x-0 y-0",onClick:e.onClose,children:(0,s.jsxs)("div",{className:"flex flex-col items-center rounded-xl bg-white text-black p-5",onClick:()=>{console.log("ignore")},children:[(0,s.jsx)("div",{children:e.children}),(0,s.jsx)("button",{className:"rounded-md bg-red-100 text-black px-4 py-2 mt-8",onClick:e.onClose,children:"閉じる"})]})})};function o(){let[e,t]=(0,n.useState)(),l=(0,n.useRef)(null),[o,r]=(0,n.useState)(),[c,a]=(0,n.useState)(),[d,h]=(0,n.useState)();async function u(e){let l=await fetch(e),s=await l.json(),n=window.innerWidth,i=window.innerHeight,o=n/s.width,r=i/s.height,c=o<r?o:r;for(let e of(s.width=Math.floor(s.width*c),s.height=Math.floor(s.height*c),s.objects)){let t=e.bbox;t[0]=t[0]*c,t[1]=t[1]*c,t[2]=t[2]*c,t[3]=t[3]*c,t[4]=(t[2]-t[0])*(t[3]-t[1])}s.objects.sort((e,t)=>e.bbox[4]-t.bbox[4]),t(s)}async function f(e){let t=await fetch(e),l=await t.json();console.log(l),a(l)}return(0,n.useEffect)(()=>{var e;f("prompts.json"),u(null!==(e=new URL(document.URL).searchParams.get("fileName"))&&void 0!==e?e:"monalisa_recog.json")},[]),(0,n.useEffect)(()=>{null!=e&&function(e){if(null==l.current)return;let t=l.current.getContext("2d");if(null!=t)for(let l of(t.strokeStyle="red",t.lineWidth=2,e.objects)){let e=l.bbox;t.beginPath(),t.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.stroke()}}(e)},[e]),(0,s.jsxs)("main",{className:"flex flex-col items-center justify-between w-screen h-screen bg-black relative",children:[null!=e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{className:"absolute left-0 top-0",style:{width:e.width,height:e.height},width:e.width,height:e.height,src:e.srcImage}),(0,s.jsx)("canvas",{ref:l,className:"absolute left-0 top-0",style:{width:e.width,height:e.height},width:e.width,height:e.height,onClick:function(t){if(null==c||null==e)return;let{pageX:l,pageY:s}=t;for(let t of e.objects){let e=t.bbox;if(l>=e[0]&&l<=e[2]&&s>=e[1]&&s<=e[3]){let e=t.label;console.log(e);let n=c[e];console.log(n),r({x:l,y:s,title:e,items:n});return}}r(void 0)}})]}),null!=o&&(0,s.jsxs)("div",{className:"absolute bg-white text-black cursor-pointer select-none py-2 shadow-xl rounded-sm",style:{left:o.x,top:o.y},children:[(0,s.jsx)("div",{className:"text-center font-bold border-b-2",children:o.title}),o.items.map(e=>(0,s.jsx)("div",{className:"px-4 py-2 hover:bg-red-100",onClick:()=>{var t;t=e.prompt,h((0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["プロンプト=",(0,s.jsx)("em",{children:t}),", best quality, fixed camra, static background"]}),(0,s.jsx)("div",{children:"ネガティブ=low quality, deformed, distort, fused fingers, bad anatomy, weird hand, ugly, zoom tilt, pan"})]})),r(void 0)},children:e.label},e.label))]}),null!=d&&(0,s.jsx)(i,{onClose:function(){h(void 0)},children:d})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(3114)),_N_E=e.O()}]);